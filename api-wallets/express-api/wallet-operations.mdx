---
title: "Wallet Operations"
description: "Create wallets and sign transactions using Express API endpoints for wallet management and signing operations."
---

## Wallet Management

### Get or Create Wallet

Get or create a wallet for the given chain and return its public address. If a wallet doesn't exist for the user and chain combination, one will be created automatically.

```bash cURL icon="square-terminal"
curl -X POST 'https://tee.express.magiclabs.com/v1/wallet' \
  -H 'Content-Type: application/json' \
  -H 'Authorization: Bearer YOUR_JWT_TOKEN' \
  -H 'X-Magic-API-Key: YOUR_MAGIC_API_KEY' \
  -H 'X-OIDC-Provider-ID: YOUR_OIDC_PROVIDER_ID' \
  -H 'X-Magic-Chain: ETH' 
```

**Response:**

```json
{
  "public_address": "0x1234567890abcdef1234567890abcdef12345678"
}
```

#### Request Parameters

<ParamField header="X-Magic-Chain" type="string" required post={["Header"]}>
The blockchain to create the wallet for. Available values: `ETH`, `SOL`, `BTC`
</ParamField>

#### Response Fields

<ResponseField name="public_address" type="string">
The wallet's public address on the specified blockchain.
</ResponseField>

<Info>
Each user can have one wallet per blockchain. Calling this endpoint multiple times with the same user and chain will return the same wallet address.
</Info>

## Signing Operations

### Sign Data

Sign a hash of arbitrary data using the wallet's private key. This is useful for signing transaction data, typed data, or any structured information.

```bash cURL icon="square-terminal"
curl -X POST 'https://tee.express.magiclabs.com/v1/wallet/sign/data' \
  -H 'Content-Type: application/json' \
  -H 'Authorization: Bearer YOUR_JWT_TOKEN' \
  -H 'X-Magic-API-Key: YOUR_MAGIC_API_KEY' \
  -H 'X-OIDC-Provider-ID: YOUR_OIDC_PROVIDER_ID' \
  -H 'X-Magic-Chain: ETH' \
  -d '{
    "raw_data_hash": "0x1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef"
  }'
```

**Response:**

```json
{
  "message_hash": "0x1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef",
  "signature": "0xabcdef1234567890abcdef1234567890abcdef1234567890abcdef1234567890",
  "r": "0x1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef",
  "s": "0xabcdef1234567890abcdef1234567890abcdef1234567890abcdef12345678",
  "v": "27"
}
```

#### Request Parameters

<ParamField header="X-Magic-Chain" type="string" required post={["Header"]}>
The blockchain to sign for. Available values: `ETH`, `SOL`, `BTC`
</ParamField>

<ParamField body="raw_data_hash" type="string" required post={["Body"]}>
The keccak256 hash of the data to sign (hex string with 0x postfix).
</ParamField>

#### Response Fields

<ResponseField name="message_hash" type="string">
The hash that was signed.
</ResponseField>

<ResponseField name="signature" type="string">
The complete signature in hex format.
</ResponseField>

<ResponseField name="r" type="string">
The r component of the ECDSA signature.
</ResponseField>

<ResponseField name="s" type="string">
The s component of the ECDSA signature.
</ResponseField>

<ResponseField name="v" type="string">
The recovery parameter of the ECDSA signature.
</ResponseField>

### Sign Message

Sign an arbitrary message using the wallet's private key. Useful for authentication, off-chain verification, and personal signatures.

```bash cURL icon="square-terminal"
curl -X POST 'https://tee.express.magiclabs.com/v1/wallet/sign/message' \
  -H 'Content-Type: application/json' \
  -H 'Authorization: Bearer YOUR_JWT_TOKEN' \
  -H 'X-Magic-API-Key: YOUR_MAGIC_API_KEY' \
  -H 'X-OIDC-Provider-ID: YOUR_OIDC_PROVIDER_ID' \
  -H 'X-Magic-Chain: ETH' \
  -d '{
    "message_base64": "SGVsbG8gV29ybGQ="
  }'
```

**Response:**

```json
{
  "signature": "0x1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef12",
  "r": "0x1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef",
  "s": "0xabcdef1234567890abcdef1234567890abcdef1234567890abcdef12345678",
  "v": "27"
}
```

#### Request Parameters

<ParamField header="X-Magic-Chain" type="string" required post={["Header"]}>
The blockchain to sign for. Available values: `ETH`, `SOL`, `BTC`
</ParamField>

<ParamField body="message_base64" type="string" required post={["Body"]}>
The message to sign, encoded as base64.
</ParamField>

#### Response Fields

<ResponseField name="signature" type="string">
The complete signature in hex format.
</ResponseField>

<ResponseField name="r" type="string">
The r component of the ECDSA signature.
</ResponseField>

<ResponseField name="s" type="string">
The s component of the ECDSA signature.
</ResponseField>

<ResponseField name="v" type="string">
The recovery parameter of the ECDSA signature.
</ResponseField>
