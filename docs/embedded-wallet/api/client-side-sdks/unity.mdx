---
title: Unity API reference
sidebarTitle: Unity
---

<Note>
  It's recommended to apply this plugin in Unity 2021.3.3f1 or newer. Developers
  may build 2d Unity mobile Apps both in iOS and Android.
</Note>

WebGL is currently not supported, but you may use [magic-js](https://github.com/magiclabs/magic-js) in a JS context to enable passwordless authentication flow.

## Overview

The Magic SDK for Unity is your entry-point to secure, passwordless authentication for your mobile app. This guide will cover some important topics for getting started with the Magic Unity SDK and to make the most of Magic's features.

## Getting Started

The Magic class is the entry-point to the Magic SDK. It must be instantiated with a Magic **publishable** key.

### Constructor

### `Magic`

|              |                         |                                                                                                                                                                                                                                                                                                                                     |
| ------------ | ----------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Parameter    | Type                    | Definition                                                                                                                                                                                                                                                                                                                          |
| `apiKey`     | String                  | Your **publishable** API Key retrieved from the Magic Dashboard.                                                                                                                                                                                                                                                                    |
| `network`    | EthNetwork              | A representation of the connected Ethereum network (one of: mainnet or goerli).                                                                                                                                                                                                                                                     |
| `locale?`    | String                  | Customize the language of Magic's modal, email and confirmation screen. See [Localization](/docs/embedded-wallet/authentication/customization/localization) for more.                                                                                                                                                                               |
| `config?`    | CustomNodeConfiguration | A custom Ethereum Node configuration with the following shape:<br/><br/>`rpcUrl` (String): A URL pointing to your custom Ethereum Node.<br/><br/>⁠`chainId?` (Number): Some Node infrastructures require you to pass an explicit chain ID. If you are aware that your Node requires this configuration, pass it here as an integer. |
| `macCanvas?` | GameObject              | Your application’s primary canvas. Must be non-null for macOS and macOS editor support.                                                                                                                                                                                                                                             |

### Initialization

<Tabs>
<Tab title="C#">
```json

using MagicSDK;

public class MagicUnity : MonoBehaviour
{
void Start()
{
Magic magic = new Magic("PUBLISHABLE_API_KEY");
Magic.Instance = magic;
}
}

````
</Tab>
</Tabs>

## Auth Module

The Auth Module and its members are accessible on the Magic SDK instance by the `auth` property.

<Tabs>
<Tab title="C#">
```json

using MagicSDK;

magic.Auth;
magic.Auth.LoginWithEmailOTP;
````

</Tab>
</Tabs>

### `loginWithEmailOTP`

Authenticate a user passwordlessly using an email one-time code sent to the specified user's email address.

#### Public Methods

|                                                          |
| -------------------------------------------------------- |
| Methods                                                  |
| async Task&lt;string&gt; LoginWithEmailOtp(string email) |

- `email` The user email to log in with

#### Returns

- `DIDToken: Task<String>`: The function resolves upon authentication request success and rejects with a specific error code if the request fails. The resolved value is a Decentralized ID token with a default 15-minute lifespan.

## User Module

The User Module and its members are accessible on the Magic SDK instance by the `user` property.

<Tabs>
<Tab title="C#">
```json

import MagicSDK

var magic = Magic.Instance

magic.User
magic.User.GetIdToken
magic.User.GenerateIdToken
magic.User.GetMetadata
magic.User.UpdateEmail
magic.User.IsLoggedIn
magic.User.Logout

````
</Tab>
</Tabs>

### `UpdateEmail`

Initiates the update email flow that allows a user to change to a new email

#### Public Methods

|     |
| --- |
| Methods |
| public async Task&lt;bool&gt; UpdateEmail() |

* `email` The user email to update with
* `showUI` If `true`, show an out-of-the-box pending UI while the request is in flight

#### Returns

* `Task<Boolean>`: The `Completable` resolves with a true boolean value if update email is successful and rejects with a specific error code if the request fails.

### `GetIdToken`

Generates a Decentralized Id Token which acts as a proof of authentication to resource servers.

#### Public Methods

|     |
| --- |
| **Methods** |
| public async Task&lt;string&gt; **GetIdToken**(int lifespan = 900) |

* `lifespan?`: will set the lifespan of the generated token. Defaults to 900s (15 mins)

#### Returns

* `GetIdTokenResponse: Task<String>`: The `Completable` resolves with a true boolean value if update email is successful and rejects with a specific error code if the request fails.

### `GenerateIdToken`

Generates a Decentralized Id Token with optional serialized data.

#### Public Methods

|     |
| --- |
| Methods |
| public async Task&lt;string&gt; **GenerateIdToken**(int lifespan = 900, string attachment = "none") |

* `lifespan` : will set the lifespan of the generated token. Defaults to 900s (15 mins)
* `attachment` : will set a signature of serialized data in the generated token. Defaults to `"none"`

#### Returns

* `Task<String>`: Base64-encoded string representation of a JSON tuple representing `[proof, claim]`

### `GetMetadata`

Retrieves information for the authenticated user.

#### Public Methods

|     |
| --- |
| Methods |
| public async Task&lt;UserMetadata&gt; **GetMetadata**() |

#### Returns

* `Task<UserMetadata>`: The `UserMetadata` containing the issuer, email and cryptographic [public address](https://support.blockchain.com/hc/en-us/articles/4417082520724-What-are-public-and-private-keys-and-how-do-they-work-) of the authenticated user

<Tabs>
<Tab title="C#">
```json
    [Serializable]
    public sealed class UserMetadata
    {
        [CanBeNull] public string issuer;
        [CanBeNull] public string publicAddress;
        [CanBeNull] public string email;
    }
````

</Tab>
</Tabs>

- `issuer` : The Decentralized ID of the user. In server-side use-cases, we recommend this value to be used as the user ID in your own tables.
- `email` : Email address of the authenticated user
- `publicAddress`: The authenticated user's public address (a.k.a.: public key). Currently, this value is associated with the Ethereum blockchain.

### `IsLoggedIn`

Checks if a user is currently logged in to the Magic SDK.

#### Public Methods

|                                                |
| ---------------------------------------------- |
| Methods                                        |
| public async Task&lt;bool&gt; **IsLoggedIn**() |

#### Returns

- `Task<Boolean>`

### `Logout`

Logs out the currently authenticated Magic user

#### Public Methods

|                                            |
| ------------------------------------------ |
| Methods                                    |
| public async Task&lt;bool&gt; **Logout**() |

#### Returns

- `Task<Boolean>`

## Resources

- [GitHub](https://github.com/magiclabs/magic-unity)
- [Goerli Testnet Faucet](https://goerlifaucet.com)
