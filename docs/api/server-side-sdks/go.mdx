---
title: Go API Reference
sidebarTitle: Go
---

## Overview

The Magic SDK for Go is your entry-point to secure, passwordless authentication for your application. This guide will cover some important topics for getting started with Go APIs and to make the most of Magic's features.

## Getting Started

The Magic class is the entry-point to the Magic SDK. It must be instantiated with a Magic **secret** key.

### Installation

<Tabs>
  <Tab title="Bash">
    ```json go get github.com/magiclabs/magic-admin-go go get
    github.com/magiclabs/magic-admin-go/client ```
  </Tab>
</Tabs>

### Constructor

### Magic

|                  |                 |                                                               |
| ---------------- | --------------- | ------------------------------------------------------------- |
| Parameter        | Type            | Definition                                                    |
| `api_secret_key` | String          | Your **secret** API Key retrieved from the Magic Dashboard.   |
| `retries`        | Integer         | Total number of retries to allow.                             |
| `retryWait`      | `time.Duration` | A period of time to apply between retry attempts.             |
| `timeout`        | `time.Duration` | A period of time the request is going to wait for a response. |

### Initialization

<Tabs>
<Tab title="Go">
```json

package main

import (
    "log"
    "fmt"
    "time"

    "github.com/magiclabs/magic-admin-go"
    "github.com/magiclabs/magic-admin-go/client"

)

func main() {
cl := magic.NewClientWithRetry(5, time.Second, 10 \* time.Second)
m, err := client.New("<SECRET_API_KEY>", cl)
}

````
</Tab>
</Tabs>

## Token Resource

The `Token` resource provides methods to interact with [DID Token](/docs/authentication/features/decentralized-id).

<Note>
The token resource does **not** make any API calls to the Magic server.
</Note>

<Tabs>
<Tab title="Go">
```json

tk, err := token.NewToken("<DID_TOKEN>")
if err != nil {
    log.Fatalf("Malformed DID token error: %s", err.Error())
}

tk.GetIssuer()
tk.GetPublicAddress()
tk.Validate()
````

</Tab>
</Tabs>

### `getIssuer`

Extracts the `iss` from the DID Token.

<Tabs>
<Tab title="Go">
```json

tk, err := token.NewToken("<DID_TOKEN>")
if err != nil {
log.Fatalf(err.Error())
}
tk.GetIssuer()

````
</Tab>
</Tabs>

#### Arguments

* `DID_TOKEN` (string): A DID Token generated by a Magic User on the client-side

#### Raises

* `token.DIDTokenError`: If the given DID Token is malformed

#### Returns

* A Decentralized ID (`iss`) of the Magic user who generated the DID Token

### `getPublicAddress`

Gets the cryptographic [public address](https://support.blockchain.com/hc/en-us/articles/4417082520724-What-are-public-and-private-keys-and-how-do-they-work-) of the Magic User who generated the supplied DID Token.

<Tabs>
<Tab title="Go">
```json

tk, err := token.NewToken("<DID_TOKEN>")
if err != nil {
    log.Fatalf(err.Error())
}
tk.GetPublicAddress()
````

</Tab>
</Tabs>

#### Arguments

- `DID_TOKEN` (string): A DID Token generated by a Magic user on the client-side

#### Raises

- `token.DIDTokenError`: If the given DID Token is malformed

#### Returns

- A [public address](https://support.blockchain.com/hc/en-us/articles/4417082520724-What-are-public-and-private-keys-and-how-do-they-work-) of the Magic User who generated the DID Token. Currently, this value is associated with the Ethereum blockchain.

### `validate`

Validates a DID token.

<Tabs>
<Tab title="Go">
```json

tk, err := token.NewToken("<DID_TOKEN>")
if err != nil {
log.Fatalf(err.Error())
}
err = tk.Validate()

````
</Tab>
</Tabs>

#### Arguments

* `DID_TOKEN` (string): A DID Token generated by a Magic user on the client-side

#### Raises

* `token.DIDTokenError`: If the given DID Token is malformed

#### Returns

* `boolean` value indicating the validity of the token

## User Resource

The `User` resource and its methods are accessible on the Magic client instance by the `User` attribute. It provides methods to interact with Magic API.

<Tabs>
<Tab title="Go">
```json

m, err := client.New("<SECRET_API_KEY>", magic.NewDefaultClient())

m.User
m.User.GetMetadataByIssuer
m.User.GetMetadataByPublicAddress
m.User.GetMetadataByToken
m.User.LogoutByIssuer
m.User.LogoutByPublicAddress
m.User.LogoutByToken
````

</Tab>
</Tabs>

### `GetMetadataByIssuer`

Retrieves information about the user by the supplied `iss` from the DID Token. This method is useful if you store the `iss` with your user data, **which is recommended**.

<Tabs>
<Tab title="Go">
```json

userInfo, err := m.User.GetMetadataByIssuer(issuer)

````
</Tab>
</Tabs>

#### Arguments

* `issuer` (string): The user's Decentralized ID, which can be parsed using [Token.GetIssuer](#getissuer)

#### Raises

* [`magic.Error`](#magic-error): If an error response is received from the Magic API, it will contain information about the error
* `magic.APIConnectionError`: If your server cannot communicate with the Magic server. Normally this is a network communication error.

<Note>
See [Error Handling](#error-handling) for more examples.
</Note>

#### Returns

* A `MagicResponse`: The `data` field contains all of the user meta information.
    * `issuer` (str): The user's Decentralized ID
    * `public_address` (str): The authenticated user's public address (a.k.a.: public key). Currently, this value is associated with the Ethereum blockchain.
    * `email` (str): The user's email address

### `GetMetadataByPublicAddress`

Retrieves information about the user by the supplied `PublicAddress`. This method is useful if you store the `PublicAddress` with your user data.

<Tabs>
<Tab title="Go">
```json

userInfo, err := User.GetMetadataByPublicAddress(publicAddress)
````

</Tab>
</Tabs>

#### Arguments

- `publicAddress` (string): The user's Ethereum public address, which can be parsed using [Token.GetPublicAddress](#getpublicaddress)

#### Raises

- [`magic.Error`](#magic-error): If an error response is received from the Magic API, it will contain information about the error
- `magic.APIConnectionError`: If your server cannot communicate with the Magic server. Normally this is a network communication error.

<Note>See [Error Handling](#error-handling) for more examples.</Note>

#### Returns

- A `MagicResponse`: The `data` field contains all of the user meta information.
  - `issuer` (str): The user's Decentralized ID
  - `public_address` (str): The authenticated user's public address (a.k.a.: public key). Currently, this value is associated with the Ethereum blockchain.
  - `email` (str): The user's email address

### `GetMetadataByToken`

Retrieves information about the user by the supplied DID Token.

<Tabs>
<Tab title="Go">
```json

userInfo, err := User.GetMetadataByToken(didToken)

````
</Tab>
</Tabs>

#### Arguments

* `didToken` (string): A DID Token generated by a Magic User on the client-side

#### Raises

* [`magic.Error`](#magic-error): If an error response is received from the Magic API, it will contain information about the error
* `magic.APIConnectionError`: If your server cannot communicate with the Magic server. Normally this is a network communication error.

<Note>
See [Error Handling](#error-handling) for more examples.
</Note>

#### Returns

* A `MagicResponse`: The `data` field contains all of the user meta information.
    * `issuer` (str): The user's Decentralized ID
    * `public_address` (str): The authenticated user's public address (a.k.a.: public key). Currently, this value is associated with the Ethereum blockchain.
    * `email` (str): The user's email address

### `LogoutByIssuer`

Logs a user out of all Magic SDK sessions given the user's Decentralized ID (`iss`). This method is useful if you store the `iss` with your user data, which is recommended.

<Tabs>
<Tab title="Go">
```json

err := User.LogoutByIssuer(issuer)
````

</Tab>
</Tabs>

#### Arguments

- `issuer` (string): The user's Decentralized ID, which can be parsed using [Token.GetIssuer](#getissuer)

#### Raises

- [`magic.Error`](#magic-error): If an error response is received from the Magic API, it will contain information about the error
- `magic.APIConnectionError`: If your server cannot communicate with the Magic server. Normally this is a network communication error.

<Note>See [Error Handling](#error-handling) for more examples.</Note>

#### Returns

- A `MagicResponse`

### `LogoutByPublicAddress`

Logs a user out of all Magic SDK sessions given the user's public address. This method is useful if you store the `publicAddress`.

<Tabs>
<Tab title="Go">
```json

err := User.LogoutByPublicAddress(publicAddress)

````
</Tab>
</Tabs>

#### Arguments

* `publicAddress` (string): The user's Ethereum public address

#### Raises

* [`magic.Error`](#magic-error): If an error response is received from the Magic API, it will contain information about the error
* `magic.APIConnectionError`: If your server cannot communicate with the Magic server. Normally this is a network communication error.

<Note>
See [Error Handling](#error-handling) for more examples.
</Note>

#### Returns

* A `MagicResponse`

### `LogoutByToken`

Logs a user out of all Magic SDK sessions given the DID Token.

<Tabs>
<Tab title="Go">
```json

err := User.LogoutByToken(didToken)
````

</Tab>
</Tabs>

#### Arguments

- `didToken` (string): A DID Token generated by a Magic user on the client-side

#### Raises

- [`magic.Error`](#magic-error): If an error response is received from the Magic API, it will contain information about the error
- `magic.APIConnectionError`: If your server cannot communicate with the Magic server. Normally this is a network communication error.

<Note>See [Error Handling](#error-handling) for more examples.</Note>

#### Returns

- A `MagicResponse`

## Response and Error Handling

It is recommended to implement error handling for API responses.

### Errors

The conventional HTTP response is adopted by the SDK. For the status code in:

- `2XX` \- Indicates success
- `4XX` \- Indicates client errors. Information provided to the SDK is invalid
- `5XX` \- Indicates server errors

### Magic Error

`magic.Error` is the base struct of all the API errors. You can check the error type to determine the API error accordingly.

<Tabs>
<Tab title="Go">
```json

\_, err := // library call

if err != nil {
// Matching error by error type for a failed HTTP request.
switch err.(type) {
case (*magic.ForbiddenError):
// Handle forbidden error.
case (*magic.BadRequestError):
// Handle bad request error.
case (*magic.RateLimitingError):
// Handle rate limiting error.
case (*magic.AuthenticationError):
// Handle authentication error.
case (\*magic.APIConnectionError):
// Handle authentication error.
default:
fmt.Printf("Other HTTP request error: %v\n", err.Error())
}
}

```
</Tab>
</Tabs>

|     |     |     |
| --- | --- | --- |
| Http Status Code | Error Type | Description |
| `429` | magic.RateLimitingError | Too many requests are submitted for a given period of time. |
| `400` | magic.BadRequestError | The API requests might have missing required fields or bad inputs. |
| `401` | magic.AuthenticationError | This means your API **secret** key is invalid. |
| `403` | magic.ForbiddenError | This normally means the given API **secret** key doesn't have permission to perform the action on the given resources. |
| –   | magic.APIError | This is a generic API error that handles other status codes that are not explicitly handled. Ex: `500` , `404` , etc. |
| –   | magic.APIConnectionError | Network connection error. This normally means the connection between your application and Magic API server cannot be established. |

### DIDTokenError

Any DID Token related error. This can mean the given token is malformed or invalid.

## Resources

* [GitHub](https://github.com/magiclabs/magic-admin-go)
* [Demo](https://github.com/magiclabs/scrappy-twitter-api-server)

## Versions

All changes to the SDK are covered in our [latest release notes](https://github.com/magiclabs/magic-admin-go/releases).

```
