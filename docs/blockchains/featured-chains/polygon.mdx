---
title: Polygon
---

###Installation

To interact with the Polygon network, you can use _either_ [`ethers.js`](https://docs.ethers.io/v5/getting-started/) or [`web3.js`](https://web3js.readthedocs.io/en/v1.2.8/getting-started.html) libraries with Magic. For a more in-depth guide on available functions provided, refer to the [EVM documentation](/docs/blockchains/featured-chains/ethereum/javascript).⁠

⁠To get started, install the following dependencies for your project:

### Ethers.js


<Tabs>
<Tab title="NPM">
```json
npm install ethers magic-sdk

```
</Tab>
<Tab title="Yarn">
```json
yarn add ethers magic-sdk

```
</Tab>
<Tab title="CDN">
```json
<script src="https://cdn.ethers.io/scripts/ethers-v4.min.js"></script>
```
</Tab>
</Tabs>

### Web3.js


<Tabs>
<Tab title="NPM">
```json
npm install web3 magic-sdk

```
</Tab>
<Tab title="Yarn">
```json
yarn add web3 magic-sdk

```
</Tab>
<Tab title="CDN">
```json
<script src="https://cdn.jsdelivr.net/npm/web3@latest/dist/web3.min.js"></script>
```
</Tab>
</Tabs>

### Initialization

The Magic class is the entry-point to the Magic SDK. It must be instantiated with a Magic **publishable** key.

<Info>
**Important**

Ethereum provider is only supported in **magic-sdk@1.0.1 or later** versions.
</Info>


### Mainnet

Mainnet Block Explorer URL: [https://polygonscan.com/](https://polygonscan.com/)

<Tabs>
<Tab title="Javascript">
```json

const customNodeOptions = {
  rpcUrl: 'https://polygon-rpc.com/', // Polygon RPC URL
  chainId: 137, // Polygon chain id
}

// Setting network to Polygon
const magic = new Magic('YOUR_PUBLISHABLE_API_KEY', { network: customNodeOptions });
```
</Tab>
</Tabs>

### Testnet

Mumbai Block Explorer: [https://www.oklink.com/amoy](https://www.oklink.com/amoy)

Mumbai ⁠Testnet Faucet: [https://faucet.polygon.technology/](https://faucet.polygon.technology/)

<Tabs>
<Tab title="Javascript">
```json

const customNodeOptions = {
  rpcUrl: 'https://rpc-amoy.polygon.technology/', // Polygon RPC URL
  chainId: 80002, // Polygon chain id
}

// Setting network to Polygon - Testnet
const magic = new Magic('YOUR_PUBLISHABLE_API_KEY', { network: customNodeOptions });
```
</Tab>
</Tabs>

### Common Methods

#### Send Transaction

#### Ethers.js


<Tabs>
<Tab title="Ethers (v6)">
```json
import { Magic } from 'magic-sdk';
import { ethers } from 'ethers';

const magic = new Magic('YOUR_PUBLISHABLE_API_KEY');
const provider = new ethers.BrowserProvider(magic.rpcProvider);

// ⭐️ After user is successfully authenticated

const signer = await provider.getSigner();

const destination = '0xE0cef4417a772512E6C95cEf366403839b0D6D6D';
const amount = ethers.parseEther('1.0'); // Convert 1 ether to wei

// Submit transaction to the blockchain
const tx = await signer.sendTransaction({
  to: destination,
  value: amount,
});

// Wait for transaction to be mined
const receipt = await tx.wait();

```
</Tab>
<Tab title="Ethers (v5)">
```json
import { Magic } from 'magic-sdk';
import { ethers } from 'ethers';

const magic = new Magic('YOUR_PUBLISHABLE_API_KEY');
const provider = new ethers.providers.Web3Provider(magic.rpcProvider);

// ⭐️ After user is successfully authenticated

const signer = provider.getSigner();

const destination = '0xE0cef4417a772512E6C95cEf366403839b0D6D6D';
const amount = ethers.utils.parseEther('1.0'); // Convert 1 ether to wei

// Submit transaction to the blockchain
const tx = await signer.sendTransaction({
  to: destination,
  value: amount,
});

// Wait for transaction to be mined
const receipt = await tx.wait();

```
</Tab>
</Tabs>

#### Web3.js

<Note>
Example is using **web3@1.2.0** or later version.
</Note>

<Tabs>
<Tab title="Javascript">
```json
import { Magic } from 'magic-sdk';
import Web3 from 'web3';

const magic = new Magic('YOUR_PUBLISHABLE_API_KEY');
const web3 = new Web3(magic.rpcProvider);

// ⭐️ After user is successfully authenticated

const fromAddress = (await web3.eth.getAccounts())[0];
const amount = web3.utils.toWei(1, 'wei'); // Convert 1 ether to wei

const receipt = await web3.eth.sendTransaction({
  from: fromAddress,
  to: destination,
  value: amount,
});
```
</Tab>
</Tabs>

### Sign Message

### [#Ethers.js](#ethers.js-0)

#### Personal Sign


<Tabs>
<Tab title="Ethers (v6)">
```json
import { Magic } from 'magic-sdk';
import { ethers } from 'ethers';

const magic = new Magic('YOUR_PUBLISHABLE_API_KEY');
const provider = new ethers.BrowserProvider(magic.rpcProvider);

// ⭐️ After user is successfully authenticated

const signer = await provider.getSigner();

const originalMessage = 'YOUR_MESSAGE';

const signedMessage = await signer.signMessage(originalMessage);

```
</Tab>
<Tab title="Ethers (v5)">
```json
import { Magic } from 'magic-sdk';
import { ethers } from 'ethers';

const magic = new Magic('YOUR_PUBLISHABLE_API_KEY');
const provider = new ethers.providers.Web3Provider(magic.rpcProvider);
await provider.send('eth_requestAccounts', []);

// ⭐️ After user is successfully authenticated

const signer = provider.getSigner();

const originalMessage = 'YOUR_MESSAGE';
const signedMessage = await signer.signMessage(originalMessage);
```
</Tab>
</Tabs>

#### Sign Typed Data v1

<Tabs>
<Tab title="Ethers (v6)">
```json
import { Magic } from 'magic-sdk';
import { ethers } from 'ethers';

const magic = new Magic('YOUR_PUBLISHABLE_API_KEY');
const provider = new ethers.BrowserProvider(magic.rpcProvider);
const signer = await provider.getSigner();

// ⭐️ After user is successfully authenticated

// Get user's Ethereum public address
const fromAddress = await signer.getAddress();

const originalMessage = [
  {
    type: 'string',
    name: 'fullName',
    value: 'John Doe',
  },
  {
    type: 'uint32',
    name: 'userId',
    value: '1234',
  },
];
const params = [originalMessage, fromAddress];
const method = 'eth_signTypedData';

const signedMessage = await signer.provider.send(method, params);

```
</Tab>
<Tab title="Ethers (v5)">
```json
import { Magic } from 'magic-sdk';
import { ethers } from 'ethers';

const magic = new Magic('YOUR_PUBLISHABLE_API_KEY');
const provider = new ethers.providers.Web3Provider(magic?.rpcProvider);
await provider.send('eth_requestAccounts', []);
const signer = provider.getSigner();

// ⭐️ After user is successfully authenticated

// Get user's Ethereum public address
const fromAddress = await signer.getAddress();

const originalMessage = [
  {
    type: 'string',
    name: 'fullName',
    value: 'John Doe',
  },
  {
    type: 'uint32',
    name: 'userId',
    value: '1234',
  },
];
const params = [originalMessage, fromAddress];
const method = 'eth_signTypedData';

const signedMessage = await signer.provider.send(method, params);
```
</Tab>
</Tabs>

#### Sign Typed Data v3

<Tabs>
<Tab title="Ethers (v6)">
```json
import { Magic } from 'magic-sdk';
import { ethers } from 'ethers';

const magic = new Magic('YOUR_PUBLISHABLE_API_KEY');
const provider = new ethers.BrowserProvider(magic.rpcProvider);
const signer = await provider.getSigner();

// ⭐️ After user is successfully authenticated

// Get user's Ethereum public address
const fromAddress = await signer.getAddress();

const originalMessage = {
  types: {
    EIP712Domain: [
      {
        name: 'name',
        type: 'string',
      },
      {
        name: 'version',
        type: 'string',
      },
      {
        name: 'verifyingContract',
        type: 'address',
      },
    ],
    Greeting: [
      {
        name: 'contents',
        type: 'string',
     },
    ],
 },
  primaryType: 'Greeting',
  domain: {
    name: 'Magic',
    version: '1',
    verifyingContract: '0xE0cef4417a772512E6C95cEf366403839b0D6D6D',
  },
  message: {
    contents: 'Hello, from Magic!',
  },
};
const params = [fromAddress, originalMessage];
const method = 'eth_signTypedData_v3';

const signedMessage = await signer.provider.send(method, params);

```
</Tab>
<Tab title="Ethers (v5)">
```json
import { Magic } from 'magic-sdk';
import { ethers } from 'ethers';

const magic = new Magic('YOUR_PUBLISHABLE_API_KEY');
const provider = new ethers.providers.Web3Provider(magic?.rpcProvider);
await provider.send('eth_requestAccounts', []);
const signer = provider.getSigner();

// ⭐️ After user is successfully authenticated

// Get user's Ethereum public address
const fromAddress = await signer.getAddress();

const originalMessage = {
  types: {
    EIP712Domain: [
      {
        name: 'name',
        type: 'string',
      },
      {
        name: 'version',
        type: 'string',
      },
      {
        name: 'verifyingContract',
        type: 'address',
      },
    ],
    Greeting: [
      {
        name: 'contents',
        type: 'string',
     },
    ],
 },
  primaryType: 'Greeting',
  domain: {
    name: 'Magic',
    version: '1',
    verifyingContract: '0xE0cef4417a772512E6C95cEf366403839b0D6D6D',
  },
  message: {
    contents: 'Hello, from Magic!',
  },
};
const params = [fromAddress, originalMessage];
const method = 'eth_signTypedData_v3';

const signedMessage = await signer.provider.send(method, params);
```
</Tab>
</Tabs>

#### Sign Typed Data v4

<Tabs>
<Tab title="Ethers (v6)">
```json
/*
  Sign Typed Data v4 adds support for
  arrays and recursive data types.

  Otherwise, it works the same as Sign Typed Data v3.
 */

import { Magic } from 'magic-sdk';
import { ethers } from 'ethers';

const magic = new Magic('YOUR_PUBLISHABLE_API_KEY');
const provider = new ethers.BrowserProvider(magic.rpcProvider);
const signer = await provider.getSigner();

// ⭐️ After user is successfully authenticated

// Get user's Ethereum public address
const fromAddress = await signer.getAddress();

const originalMessage = {
  types: {
    EIP712Domain: [
      {
        name: 'name',
        type: 'string',
      },
      {
        name: 'version',
        type: 'string',
      },
      {
        name: 'verifyingContract',
        type: 'address',
      },
    ],
    Greeting: [
      {
        name: 'contents',
        type: 'string',
      },
    ],
  },
  primaryType: 'Greeting',
  domain: {
    name: 'Magic',
    version: '1',
    verifyingContract: '0xE0cef4417a772512E6C95cEf366403839b0D6D6D',
  },
  message: {
    contents: 'Hello, from Magic!',
  },
};
const params = [fromAddress, originalMessage];
const method = 'eth_signTypedData_v4';

const signedMessage = await signer.provider.send(method, params);

```
</Tab>
<Tab title="Ethers (v5)">
```json
/*
  Sign Typed Data v4 adds support for
  arrays and recursive data types.

  Otherwise, it works the same as Sign Typed Data v3.
 */

import { Magic } from 'magic-sdk';
import { ethers } from 'ethers';

const magic = new Magic('YOUR_PUBLISHABLE_API_KEY');
const provider = new ethers.providers.Web3Provider(magic.rpcProvider);
const signer = provider.getSigner();

// ⭐️ After user is successfully authenticated

// Get user's Ethereum public address
const fromAddress = await signer.getAddress();

const originalMessage = {
  types: {
    EIP712Domain: [
      {
        name: 'name',
        type: 'string',
      },
      {
        name: 'version',
        type: 'string',
      },
      {
        name: 'verifyingContract',
        type: 'address',
      },
    ],
    Greeting: [
      {
        name: 'contents',
        type: 'string',
      },
    ],
  },
  primaryType: 'Greeting',
  domain: {
    name: 'Magic',
    version: '1',
    verifyingContract: '0xE0cef4417a772512E6C95cEf366403839b0D6D6D',
  },
  message: {
    contents: 'Hello, from Magic!',
  },
};
const params = [fromAddress, originalMessage];
const method = 'eth_signTypedData_v4';

const signedMessage = await signer.provider.send(method, params);
```
</Tab>
</Tabs>

### [#Web3.js](#web3.js-0)

<Note>

The following examples assume **web3@>=4.0.2**
</Note>

#### Personal Sign


<Tabs>
<Tab title="Typescript">
```json

import { Magic } from 'magic-sdk';
import Web3 from 'web3';

const magic = new Magic('YOUR_PUBLISHABLE_API_KEY');
const web3 = new Web3(magic.rpcProvider);

// ⭐️ After user is successfully authenticated

// Get user's Ethereum public address
const fromAddress = (await web3.eth.getAccounts())[0];

const originalMessage = 'YOUR_MESSAGE';

const signedMessage = await web3.eth.personal.sign(originalMessage, fromAddress, "ACCOUNT_PASSWORD");
```
</Tab>
</Tabs>

#### Sign Typed Data v1

<Tabs>
<Tab title="Typescript">
```json

import { Magic } from 'magic-sdk';
import Web3 from 'web3';

const magic = new Magic('YOUR_PUBLISHABLE_API_KEY');
const web3 = new Web3(magic.rpcProvider);

// ⭐️ After user is successfully authenticated

// Get user's Ethereum public address
const fromAddress = (await web3.eth.getAccounts())[0];

const message = [
  {
    type: 'string',
    name: 'fullName',
    value: 'John Doe',
  },
  {
    type: 'uint32',
    name: 'userId',
    value: '1234',
  },
];

const signedMessage = await web3.eth.signTypedData(fromAddress, message, true)
```
</Tab>
</Tabs>


#### Sign Typed Data v4

<Tabs>
<Tab title="Typescript">
```json

/*
  Sign Typed Data v4 adds support for
  arrays and recursive data types.

  Otherwise, it works the same as Sign Typed Data v3.
 */

import { Magic } from 'magic-sdk';
import Web3 from 'web3';

const magic = new Magic('YOUR_PUBLISHABLE_API_KEY');
const web3 = new Web3(magic.rpcProvider);

// ⭐️ After user is successfully authenticated

// Get user's Ethereum public address
const fromAddress = (await web3.eth.getAccounts())[0];

const message = {
  types: {
    EIP712Domain: [
      {
        name: 'name',
        type: 'string',
      },
      {
        name: 'version',
        type: 'string',
      },
      {
        name: 'verifyingContract',
        type: 'address',
      },
    ],
    Greeting: [
      {
        name: 'contents',
        type: 'string',
      },
    ],
  },
  primaryType: 'Greeting',
  domain: {
    name: 'Magic',
    version: '1',
    verifyingContract: '0xE0cef4417a772512E6C95cEf366403839b0D6D6D',
  },
  message: {
    contents: 'Hello, from Magic!',
  },
};

const signedMessage = await web3.eth.signTypedData(fromAddress, message);
```
</Tab>
</Tabs>

### Get Balance

### Ethers.js


<Tabs>
<Tab title="Ethers (v6)">
```json
import { Magic } from 'magic-sdk';
import { ethers } from 'ethers';

const magic = new Magic('YOUR_PUBLISHABLE_API_KEY')
const provider = new ethers.BrowserProvider(magic.rpcProvider);

const signer = await provider.getSigner();

// Get user's Ethereum public address
const address = await signer.getAddress();

// Get user's balance in ether
const balance = ethers.formatEther(
  await provider.getBalance(address), // Balance is in wei
);

```
</Tab>
<Tab title="Ethers (v5)">
```json
import { Magic } from 'magic-sdk';
import { ethers } from 'ethers';

const magic = new Magic('YOUR_PUBLISHABLE_API_KEY');
const provider = new ethers.providers.Web3Provider(magic.rpcProvider);
await provider.send('eth_requestAccounts', []);

const signer = provider.getSigner();

// Get user's Ethereum public address
const address = await signer.getAddress();

// Get user's balance in ether
const balance = ethers.utils.formatEther(
  await provider.getBalance(address), // Balance is in wei
);
```
</Tab>
</Tabs>

### Web3.js

<Tabs>
<Tab title="Javascript">
```json

import { Magic } from 'magic-sdk';
import Web3 from 'web3';

const magic = new Magic('YOUR_PUBLISHABLE_API_KEY');
const web3 = new Web3(magic.rpcProvider);

// Get user's Ethereum public address
const address = (await web3.eth.getAccounts())[0];

// Get user's balance in ether
const balance = web3.utils.fromWei(
  await web3.eth.getBalance(address),
  'wei' // Balance is in wei
);
```
</Tab>
</Tabs>

### Resources

* [Magic JavaScript SDK](https://github.com/magiclabs/magic-js)
* [EVM Documentation](/docs/blockchains/featured-chains/ethereum/javascript)
